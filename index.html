<!DOCTYPE html>
<html>
<head>
 <script defer type="module" src="https://embeddables.p.mbirdcdn.net/v1/web-components.es.js"></script>
<script>
  const workspaceId = "cb34100c-c841-4284-9005-66332d274c4b"
  window.mbembeds = window.mbembeds || [];
  function mbinit(){mbembeds.push(arguments);}
  mbinit(workspaceId);
</script>
</head>
<body>
  <img src="homepage.png" style="width: 45%; height: 45%;">
  <form id = 'myForm'>
     <fieldset>
     <legend>Booking Details</legend>
      <img src="relax.png" style="width: 75%; height: 45%; float: right;">
      <p>
          First name: <input type = "text" name = "fname" />
   </p>
 <p>
  Last name: <input type = "text" name = "lname" />
 </p>
 <p>
  Destination Country: <input type = "text" name = "dcountry" />
 </p>     
 <p>
  Depart: <input type = "date" name = "arrival" />
 </p>
 <p>
  Return: <input type = "date" name = "departure" />
 </p>
 <p>
  Phone Number: <input type = "text" name = "phone" />
 </p>
 <p>
  <input type = "checkbox" name = "smsSubscribtion" value = "true"> Sign me up for SMS deal notifications!
 </p>
 <p>
  Email: <input type = "text" name = "email" />
 </p>
  <p>
  <input type = "checkbox" name = "emailSubscribtion" value = "true"> Sign me up for email deal notifications!
 </p>
 <p>
  <input type = "submit" name = "submit" value = "Submit" />
 </p>
</fieldset>
</form>
</body>
<script>
var form = document.getElementById('myForm');
form.onsubmit = function(event){
        var xhr = new XMLHttpRequest();
        var formData = new FormData(form);
        //open the request
        xhr.open('POST','https://capture.eu-west-1.nest.messagebird.com/webhooks/cb34100c-c841-4284-9005-66332d274c4b/cffc7856-1cf1-417e-99d0-2dca374cb674')
        xhr.setRequestHeader("Content-Type", "application/json");
        
        //send the form data
        xhr.send(JSON.stringify(Object.fromEntries(formData)));
        xhr.onreadystatechange = function() {
            if (xhr.readyState == XMLHttpRequest.DONE) {
                form.reset(); //reset form after AJAX success or do something else
            }
        }
        //Fail the onsubmit to avoid page refresh.
        return false;
    }
</script>
</html>
